{% extends "shop/basic.html" %}
{% block title %} Contact Us {% endblock %}

{% block body %}
<div class="container">
  <h3>Contact Us</h3>
  <form action="/shop/contact/" method="post">
    {% csrf_token %}
    <div class="form-group mt-3">
      <label for="name">Name</label>
      <input type="text" class="form-control" id="name" name="name" placeholder="Enter Your Name" />
    </div>

    <div class="form-group mt-3">
      <label for="email">Email</label>
      <input type="email" class="form-control" id="email" name="email" placeholder="Enter Your Email" />
    </div>

    <div class="form-group mt-3">
      <label for="phone">Phone</label>
      <input type="tel" class="form-control" id="phone" name="phone" placeholder="Enter Your Phone Number" />
    </div>

    <div class="form-group mt-3">
      <label for="desc">How May We Help You ?</label>
      <textarea class="form-control" id="desc" name="desc" rows="3"></textarea>
    </div>

    <button type="submit" name="submit" class="btn btn-success mt-3">Submit</button>
  </form>
</div>
{% endblock %}

{% block js %}
<script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>

<script>
  if (localStorage.getItem("cart") == null) {
    var cart = {};
  } else {
    var cart = JSON.parse(localStorage.getItem("cart"));
    document.getElementById("cart").innerHTML = Object.keys(cart).length;
  }

  $(".cart").click(function () {
    var idstr = this.dataset.id;

    if (cart[idstr] !== undefined) {
      cart[idstr] += 1;
    } else {
      cart[idstr] = 1;
    }

    localStorage.setItem("cart", JSON.stringify(cart));
    document.getElementById("cart").innerHTML = Object.keys(cart).length;
  });

  const pop = new bootstrap.Popover(document.getElementById("popcart"), {
    html: true,
    trigger: "hover",
    placement: "bottom",
  });

  document.getElementById("popcart").setAttribute(
    "data-bs-content",
    "<h6>Cart for your items in my shopping cart</h6>"
  );

  {% if submit %}
    alert("Thanks! {{name}} you are connected with us.");
    document.location = "/shop";
  {% endif %}
</script>
{% endblock %}
